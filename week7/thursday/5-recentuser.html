<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sign-Up Today!</title>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">


</head>
<body>

<div class="container">
	
	<br>

	<!-- Jumbotron -->
	<div class="jumbotron">
		<h1 class="text-center">Sign-Up Today!</h1>
	</div>

	<div class="row">

		<!-- Sign-Up Panel-->
		<div class="col-lg-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">New Member Sign-Up</h3>
				</div>
				<div class="panel-body">
					
					<!-- Sign-up Form (note the various input "types")-->
					<form role="form">
					  <div class="form-group">
					    <label for="text">Name:</label>
					    <input type="text" class="form-control" id="nameinput">
					  </div>
					  <div class="form-group">
					    <label for="text">Email:</label>
					    <input type="email" class="form-control" id="emailinput">
					  </div>
					  <div class="form-group">
					    <label for="text">Age:</label>
					    <input type="number" class="form-control" id="ageinput">
					  </div>
					  <div class="form-group">
						 <label for="comment">How did you hear about us?</label>
						 <textarea class="form-control" rows="5" id="commentinput"></textarea>
					   </div>
					  <button type="submit" class="btn btn-default" id="addUser">Submit</button>
					</form>

				</div>
			</div>
		</div>

		<!-- Most Recent Member Panel -->
		<div class="col-lg-6">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Most Recent Member</h3>
				</div>
				<div class="panel-body" id="recentMember">
					<h2 id="namedisplay">Jimmy John</h2>
					<h4 id="emaildisplay">Email: jimmy@john.edu</h4>
					<h4 id="agedisplay">Age: 27</h4>
					<p id="commentdisplay">I'm signing up, because I want to spread sandwiches to the world.</p>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Latest compiled and minified CSS & JS -->
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
<script>

// ========================================== START CODING BELOW!!
var dataRef = new Firebase("https://shining-torch-8873.firebaseio.com/");

var name = "";
var email = "";
var age = "";
var commento = "";
// Capture Button Click
$("#addUser").on("click", function() {

	// YOUR TASK!!!
	// Code in the logic for storing and retrieving the most recent user. 
	// Dont forget to handle the "initial load"

		name = $('#nameinput').val().trim(); 
		age = $('#ageinput').val().trim(); 
		email = $('#emailinput').val().trim();
		commento = $('#commentinput').val().trim(); 

		dataRef.set({
			name: name,
			age: age,
			email: email,
			commento: commento
		});
	// Don't refresh the page!
	return false;
})

// Create Firebase "watcher" (.on("value"))
dataRef.on("value", function(snapshot) {

		// Print the initial data to the console.
		console.log(snapshot.val());

		// Log the value of the various properties
		console.log(snapshot.val().name);
		console.log(snapshot.val().age);
		console.log(snapshot.val().email);
		console.log(snapshot.val().commento);
		// Change the HTML
		$("#recentMember").html(snapshot.val().name + " | " + snapshot.val().age + " | " + snapshot.val().email " | " + snapshot.val().commento);

	// If any errors are experienced, log them to console. 
	}, function (errorObject) {

	  	console.log("The read failed: " + errorObject.code);

	});
// Create Error Handling

</script>
	
</body>
</html>